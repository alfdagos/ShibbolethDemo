<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shibboleth Demo App</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .card { border: 1px solid #ccc; padding: 20px; border-radius: 5px; max-width: 600px; margin: 0 auto; }
        h1 { color: #333; }
        pre { background: #f4f4f4; padding: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>Shibboleth Demo Frontend</h1>
        <p>This page is served by Apache HTTPD protected by Shibboleth.</p>
        <p>If you see this, you have successfully authenticated via the IDP.</p>
        
        <h2>Backend API Response:</h2>
        <div id="api-response">Loading...</div>
        
        <p><a href="/Shibboleth.sso/Logout">Logout</a></p>
    </div>

    <script>
        fetch('/api/user')
            .then(response => response.json())
            .then(data => {
                document.getElementById('api-response').innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(error => {
                document.getElementById('api-response').innerText = 'Error fetching API: ' + error;
            });
    </script>
</body>
</html>
